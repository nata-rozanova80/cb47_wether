import requests

# ========== –ù–ê–°–¢–†–û–ô–ö–ò ==========
API_KEY = '6598f43f85a0b6322cd57a7087ffe0e8'  # ‚ö†Ô∏è


# ========== –§–£–ù–ö–¶–ò–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø –ü–û–ì–û–î–´ ==========
def get_weather(city):
    """
    –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
    """
    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URL –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–∞
    url = f"https://api.openweathermap.org/data/2.5/weather?q={city}&appid={API_KEY}&units=metric&lang=ru"

    try:
        # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
        response = requests.get(url)

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞
        if response.status_code == 200:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
            data = response.json()

            # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            temp = round(data['main']['temp'], 1)  # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–æ–∫—Ä—É–≥–ª–µ–Ω–æ –¥–æ 1 –∑–Ω–∞–∫–∞)
            description = data['weather'][0]['description']  # –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã
            humidity = data['main']['humidity']  # –í–ª–∞–∂–Ω–æ—Å—Ç—å

            # –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            print("\n" + "=" * 50)
            print(f"üå§Ô∏è  –ü–û–ì–û–î–ê –í –ì–û–†–û–î–ï: {city.upper()}")
            print("=" * 50)
            print(f"üå°Ô∏è  –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {temp}¬∞C")
            print(f"‚òÅÔ∏è  –û–ø–∏—Å–∞–Ω–∏–µ: {description}")
            print(f"üíß  –í–ª–∞–∂–Ω–æ—Å—Ç—å: {humidity}%")
            print("=" * 50 + "\n")

        elif response.status_code == 404:
            print(f"\n‚ùå –ì–æ—Ä–æ–¥ '{city}' –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è.")
        else:
            print(f"\n‚ùå –û—à–∏–±–∫–∞: {response.status_code}")
            print(f"–°–æ–æ–±—â–µ–Ω–∏–µ: {response.json().get('message', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞')}")

    except requests.exceptions.ConnectionError:
        print("\n‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É")
    except Exception as e:
        print(f"\n‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {e}")


# ========== –û–°–ù–û–í–ù–ê–Ø –ü–†–û–ì–†–ê–ú–ú–ê ==========
if __name__ == "__main__":
    print("=" * 50)
    print("üåç  –ü–†–û–ì–†–ê–ú–ú–ê –ü–û–ì–û–î–´")
    print("=" * 50)

    # –ó–∞–ø—Ä–æ—Å –≥–æ—Ä–æ–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    city = input("\nüìç –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞: ")

    # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥ –ø–æ–≥–æ–¥—ã
    get_weather(city)
